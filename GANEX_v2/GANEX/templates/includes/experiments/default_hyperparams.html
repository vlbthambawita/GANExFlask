<script>
    
    $(document).ready(function(){

        var socket = io('/experiments');
        
        socket.emit('my test', {data: {"para_name": $("#para_name").val(), 
                            "para_key": $("#para_key").val(),
                            "para_value": $("#para_value").val()}});
  

        $("#frm_default_hyperpara").submit(function(e){
            e.preventDefault();
            

            $.ajax({
                    type: 'GET',
                    url: "{{ url_for('experiments.default_hyperparams', pid=pid) }}",
                    data: {"para_name": $("#para_name").val(), 
                            "para_key": $("#para_key").val(),
                            "para_value": $("#para_value").val()},
                    contentType: 'application/json',
                    success: function(data){
                        
                        //alert("success" + data.x)
                        update_table(data.x)

                    }
                })
        })
    })

    function update_table(para_list){
        //alert(para_list.para_name)
        var tbl = document.getElementById("tbl_params")
        var i ;
        for (i= 0; i < para_list.length; i++){
            var row = tbl.insertRow(i);

            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);

            cell1.innerHTML = para_list[i].para_name;
            cell2.innerHTML = para_list[i].para_key;
            cell3.innerHTML = para_list[i].para_value;
           // alert(i)

        }
        

    }
</script>

<form id="frm_default_hyperpara" >
    <label>Parameter Name:</label>
    <input id="para_name" type="text" required>

    <label>Parameter Key:</label>
    <input id="para_key" type="text" required>

    <label>Default Value:</label>
    <input id="para_value" type="text" required>

    <input type="submit" value="Add">

</form>

{{ default_para_list }}

<table id="tbl_params">
    <tr>
        <th> Parameter Name</th><th> Parameter Key</th><th> Parameter Default Value</th>
    </tr>
    {% if default_para_list != [] %}
        {% for dict in default_para_list %}
                    <tr> 
                        <td>{{ dict["para_name"] }}</td>
                        <td>{{ dict["para_key"] }}</td>
                        <td>{{ dict["para_value"] }}</td>
                        <td><a href="{{ url_for('experiments.delete_default_para', pid=pid, para_key=this)}}" value="{{ dict['para_key'] }}">Delete</a></td>
                    </tr>
        {% endfor %}
    {% endif %}
</table>